countyData = [
  {
    name: 'ADAMS'
    lat: 39.87154208
    lng: -77.21787579
  }
  {
    name: 'ALLEGHENY'
    lat: 40.46881604
    lng: -79.98107801
  }
  {
    name: 'ARMSTRONG'
    lat: 40.81313242
    lng: -79.46488336
  }
  {
    name: 'BEAVER'
    lat: 40.6823876
    lng: -80.34915734
  }
  {
    name: 'BEDFORD'
    lat: 40.00629194
    lng: -78.49022957
  }
  {
    name: 'BERKS'
    lat: 40.41630281
    lng: -75.9261035
  }
  {
    name: 'BLAIR'
    lat: 40.48106511
    lng: -78.34842223
  }
  {
    name: 'BRADFORD'
    lat: 41.78869878
    lng: -76.51539016
  }
  {
    name: 'BUCKS'
    lat: 40.33696484
    lng: -75.10689692
  }
  {
    name: 'BUTLER'
    lat: 40.91175322
    lng: -79.91288773
  }
  {
    name: 'CAMBRIA'
    lat: 40.49509196
    lng: -78.71352871
  }
  {
    name: 'CAMERON'
    lat: 41.43632595
    lng: -78.20299615
  }
  {
    name: 'CARBON'
    lat: 40.91838641
    lng: -75.7087925
  }
  {
    name: 'CENTRE'
    lat: 40.91959678
    lng: -77.81984403
  }
  {
    name: 'CHESTER'
    lat: 39.9733415
    lng: -75.74840733
  }
  {
    name: 'CLARION'
    lat: 41.19293274
    lng: -79.42044628
  }
  {
    name: 'CLEARFIELD'
    lat: 40.99985502
    lng: -78.47419559
  }
  {
    name: 'CLINTON'
    lat: 41.2339861
    lng: -77.63708788
  }
  {
    name: 'COLUMBIA'
    lat: 41.04862681
    lng: -76.40515193
  }
  {
    name: 'CRAWFORD'
    lat: 41.68469001
    lng: -80.10616131
  }
  {
    name: 'CUMBERLAND'
    lat: 40.16374099
    lng: -77.26524169
  }
  {
    name: 'DAUPHIN'
    lat: 40.41533426
    lng: -76.77878103
  }
  {
    name: 'DELAWARE'
    lat: 39.91675406
    lng: -75.39871461
  }
  {
    name: 'ELK'
    lat: 41.42465703
    lng: -78.64842977
  }
  {
    name: 'ERIE'
    lat: 41.99139167
    lng: -80.0322144
  }
  {
    name: 'FAYETTE'
    lat: 39.91994935
    lng: -79.64730278
  }
  {
    name: 'FOREST'
    lat: 41.51277557
    lng: -79.23530595
  }
  {
    name: 'FRANKLIN'
    lat: 39.92735466
    lng: -77.72118795
  }
  {
    name: 'FULTON'
    lat: 39.92542977
    lng: -78.1125101
  }
  {
    name: 'GREENE'
    lat: 39.85385397
    lng: -80.2228948
  }
  {
    name: 'HUNTINGDON'
    lat: 40.41685688
    lng: -77.98131425
  }
  {
    name: 'INDIANA'
    lat: 40.65207186
    lng: -79.08768463
  }
  {
    name: 'JEFFERSON'
    lat: 41.12783351
    lng: -78.99949574
  }
  {
    name: 'JUNIATA'
    lat: 40.5311035
    lng: -77.4020998
  }
  {
    name: 'LACKAWANNA'
    lat: 41.43674191
    lng: -75.60907346
  }
  {
    name: 'LANCASTER'
    lat: 40.0424154
    lng: -76.24735276
  }
  {
    name: 'LAWRENCE'
    lat: 40.99129832
    lng: -80.33395212
  }
  {
    name: 'LEBANON'
    lat: 40.3674759
    lng: -76.45812979
  }
  {
    name: 'LEHIGH'
    lat: 40.61267992
    lng: -75.59230239
  }
  {
    name: 'LUZERNE'
    lat: 41.17714218
    lng: -75.98915613
  }
  {
    name: 'LYCOMING'
    lat: 41.34320864
    lng: -77.06406021
  }
  {
    name: 'MCKEAN'
    lat: 41.80778726
    lng: -78.56912962
  }
  {
    name: 'MERCER'
    lat: 41.30228638
    lng: -80.25800202
  }
  {
    name: 'MIFFLIN'
    lat: 40.61040359
    lng: -77.61707706
  }
  {
    name: 'MONROE'
    lat: 41.05803269
    lng: -75.33976524
  }
  {
    name: 'MONTGOMERY'
    lat: 40.2108146
    lng: -75.36722222
  }
  {
    name: 'MONTOUR'
    lat: 41.02804618
    lng: -76.65858677
  }
  {
    name: 'NORTHAMPTON'
    lat: 40.75422864
    lng: -75.30754651
  }
  {
    name: 'NORTHUMBERLAND'
    lat: 40.85150811
    lng: -76.70831682
  }
  {
    name: 'PERRY'
    lat: 40.3987678
    lng: -77.2613339
  }
  {
    name: 'PHILADELPHIA'
    lat: 40.00735716
    lng: -75.13395657
  }
  {
    name: 'PIKE'
    lat: 41.3319446
    lng: -75.03364405
  }
  {
    name: 'POTTER'
    lat: 41.74476212
    lng: -77.89594054
  }
  {
    name: 'SCHUYLKILL'
    lat: 40.70597014
    lng: -76.21546784
  }
  {
    name: 'SNYDER'
    lat: 40.76982689
    lng: -77.0698541
  }
  {
    name: 'SOMERSET'
    lat: 39.97252448
    lng: -79.02819819
  }
  {
    name: 'SULLIVAN'
    lat: 41.44631174
    lng: -76.51220474
  }
  {
    name: 'SUSQUEHANNA'
    lat: 41.82136102
    lng: -75.80062281
  }
  {
    name: 'TIOGA'
    lat: 41.77219276
    lng: -77.25426774
  }
  {
    name: 'UNION'
    lat: 40.96311785
    lng: -77.06120442
  }
  {
    name: 'VENANGO'
    lat: 41.40091294
    lng: -79.75806242
  }
  {
    name: 'WARREN'
    lat: 41.81458302
    lng: -79.2740312
  }
  {
    name: 'WASHINGTON'
    lat: 40.18966943
    lng: -80.24840012
  }
  {
    name: 'WAYNE'
    lat: 41.64876513
    lng: -75.30318376
  }
  {
    name: 'WESTMORELAND'
    lat: 40.31084024
    lng: -79.46680042
  }
  {
    name: 'WYOMING'
    lat: 41.51834501
    lng: -76.01642993
  }
  {
    name: 'YORK'
    lat: 39.92020428
    lng: -76.72629914
  }
]

# Add some data if it isn't already there
if Counties.find().count() is 0
  console.log 'Adding counties...'
  _.each countyData, (county)->

    Counties.insert
      name: county.name
      loc:
        lat: county.lat
        lon: county.lng

  Counties._ensureIndex loc: '2d'

if Sites.find().count() is 0
  console.log 'Adding bikes...'
  _.each @bikes.features, (bike) ->
    p = bike.properties

    Sites.insert
      Planning_O: p.Planning_O
      Marker_Typ: p.Marker_Typ
      Marker_Com: p.Marker_Com
      Location: p.Location
      County: p.County
      MPO_RPO: p.MPO_RPO
      markersize: p.markersize
      markercolo: p.markercolo
      markersymb: p.markersymb
      loc:
        lat: p.Latitude
        lon: p.Longitude

  console.log 'Adding bridges...'
  _.each @bridge.features, (b) ->
    p = b.properties

    Sites.insert
      Planning_O: p.Planning_O
      Marker_Typ: p.Marker_Typ
      Marker_Com: p.Marker_Com
      Location: p.Location
      County: p.County
      MPO_RPO: p.MPO_RPO
      markersize: p.markersize
      markercolo: p.markercolo
      markersymb: p.markersymb
      loc:
        lat: p.Latitude
        lon: p.Longitude

  console.log 'Adding congestion...'
  _.each @congestion.features, (c) ->
    p = c.properties

    Sites.insert
      Planning_O: p.Planning_O
      Marker_Typ: p.Marker_Typ
      Marker_Com: p.Marker_Com
      Location: p.Location
      County: p.County
      MPO_RPO: p.MPO_RPO
      markersize: p.markersize
      markercolo: p.markercolo
      markersymb: p.markersymb
      loc:
        lat: p.Latitude
        lon: p.Longitude

  console.log 'Adding roadways...'
  _.each @roadway.features, (r) ->
    p = r.properties

    Sites.insert
      Planning_O: p.Planning_O
      Marker_Typ: p.Marker_Typ
      Marker_Com: p.Marker_Com
      Location: p.Location
      County: p.County
      MPO_RPO: p.MPO_RPO
      markersize: p.markersize
      markercolo: p.markercolo
      markersymb: p.markersymb
      loc:
        lat: p.Latitude
        lon: p.Longitude

  console.log 'Adding safety...'
  _.each @safety.features, (s) ->
    p = s.properties

    Sites.insert
      Planning_O: p.Planning_O
      Marker_Typ: p.Marker_Typ
      Marker_Com: p.Marker_Com
      Location: p.Location
      County: p.County
      MPO_RPO: p.MPO_RPO
      markersize: p.markersize
      markercolo: p.markercolo
      markersymb: p.markersymb
      loc:
        lat: p.Latitude
        lon: p.Longitude

  console.log 'Adding features...'
  _.each @transit.features, (t) ->
    p = t.properties

    Sites.insert
      Planning_O: p.Planning_O
      Marker_Typ: p.Marker_Typ
      Marker_Com: p.Marker_Com
      Location: p.Location
      County: p.County
      MPO_RPO: p.MPO_RPO
      markersize: p.markersize
      markercolo: p.markercolo
      markersymb: p.markersymb
      loc:
        lat: p.Latitude
        lon: p.Longitude

  console.log 'Adding walks...'
  _.each @walk.features, (w) ->
    p = w.properties

    Sites.insert
      Planning_O: p.Planning_O
      Marker_Typ: p.Marker_Typ
      Marker_Com: p.Marker_Com
      Location: p.Location
      County: p.County
      MPO_RPO: p.MPO_RPO
      markersize: p.markersize
      markercolo: p.markercolo
      markersymb: p.markersymb
      loc:
        lat: p.Latitude
        lon: p.Longitude

  Sites._ensureIndex loc: '2d'
